# ============================================================
# values-prod.yaml — Production overrides for GCP k3s
# Usage: helm install <store-name> ./store-chart \
#          -f values.yaml \
#          -f values-prod.yaml \
#          --set ingress.host=<store-name>.34.135.50.141.nip.io
# ============================================================

# ── Ingress ──────────────────────────────────────────────────
ingress:
  enabled: true
  className: "traefik"        # k3s uses Traefik by default
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: web
  host: "store.local"         # Gets overridden per store via --set ingress.host=

# ── Storage ───────────────────────────────────────────────────
db:
  rootPassword: "prod-secure-password"
  name: "wordpress"
  persistence:
    storageClass: "local-path"   # k3s default storage class
    size: 5Gi

# ── Image pull policy ─────────────────────────────────────────
image:
  pullPolicy: Always

# ── Resource limits ───────────────────────────────────────────
resources:
  wordpress:
    requests:
      cpu: "200m"
      memory: "256Mi"
    limits:
      cpu: "1"
      memory: "1Gi"
  mysql:
    requests:
      cpu: "200m"
      memory: "256Mi"
    limits:
      cpu: "1"
      memory: "1Gi"

# ── What changes local → prod ─────────────────────────────────
# | Setting          | Local (values-local.yaml) | Prod (this file)        |
# |------------------|---------------------------|-------------------------|
# | storageClass     | hostpath                  | local-path (k3s)        |
# | ingressClassName | nginx                     | traefik                 |
# | ingress host     | store.local               | store.IP.nip.io         |
# | pullPolicy       | IfNotPresent              | Always                  |
# | resource limits  | none                      | defined above           |